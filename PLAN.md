# План доработки Task Nudge Extension v2

## Новые требования

### 1. Git дифы - обязательные комментарии и отображение
- Показывать детальную информацию о дифах
- Выводить что изменилось с последнего раза
- Сравнение дифов должно быть видно пользователю

### 2. Вопрос про настроение
- Добавить в список вопросов: "Как твоё настроение?"
- На основе настроения корректировать финальную речь AI
- Веселое настроение → бодрая речь, грустное → поддерживающая

### 3. Вариант "Не знаю" в ответах
- Во всех вопросах добавить кнопку "Не знаю"
- AI должен помочь с такими ответами
- Давать подсказки к кому обратиться
- Предлагать решения

### 4. Чат как у Copilot
- Создать панель чата как у GitHub Copilot
- После вопросов открывать чат для дальнейшего общения
- Все дебаги и ответы выводить в чат
- Интерактивное общение с AI

## Этапы реализации

### Этап 1: Улучшение Git анализа
- [x] Добавить детальную информацию о дифах
- [x] Показывать сравнение с предыдущим состоянием
- [x] Выводить информацию в чат

### Этап 2: Добавление вопроса про настроение
- [x] Обновить настройки - добавить вопрос про настроение по умолчанию
- [x] Обновить AI анализ - учитывать настроение при генерации речи

### Этап 3: "Не знаю" ответы
- [x] Добавить кнопку "Не знаю" ко всем вопросам
- [x] AI анализ таких ответов с подсказками

### Этап 4: Панель чата
- [x] Создать webview с интерфейсом чата
- [x] Интеграция с AI для ответов в чате
- [x] Переместить весь дебаг в чат
- [x] Возможность задавать дополнительные вопросы

### Этап 5: Интеграция всего вместе
- [x] Обновить основной флоу
- [x] Открытие чата после опроса
- [x] Тестирование всех фич

## Файлы для изменения

### Новые файлы:
- `src/chat.ts` - панель чата
- `src/chatWebview.html` - HTML интерфейс чата

### Изменяемые файлы:
- `package.json` - добавить вопрос про настроение
- `src/dialog.ts` - кнопка "Не знаю", интеграция чата
- `src/openai.ts` - анализ настроения, помощь с "не знаю"
- `src/gitSnapshot.ts` - детальная информация о дифах
- `src/extension.ts` - интеграция чата

## Ключевые особенности
- Чат открывается автоматически после опроса
- Все дебаги идут в чат, не в отдельные каналы
- AI помогает с неопределенными ответами
- Настроение влияет на тон финальной речи
- Детальная информация о Git изменениях